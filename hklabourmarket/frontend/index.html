<!doctype html>
<html lang="en">

<head>
    <title>HK Labour Market</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">

    <!-- D3.js -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>


    <style>
        .make-me-sticky {
            position: sticky;
            top: 0;
        }
        
        .bottom-one {
            margin-bottom: 1cm;
        }
        
        .bottom-three {
            margin-bottom: 3cm;
        }
        /* D3.js */
        
        g.arc path {
            stroke: #828282;
            stroke-width: 0.5;
        }
        
        g.arc text {
            font-size: 10px;
        }
        
        .label {
            display: flex;
            align-items: center;
        }
        
        .button {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 15px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
            opacity: 0.7;
            -webkit-transition: opacity .15s ease-in-out;
            transition: opacity .15s ease-in-out;
        }
        
        .slider:hover {
            opacity: 1;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border: 0;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
        }
        
        .textField {
            display: flex;
            text-align: right;
            padding-top: 2px;
            padding-left: 5px;
            padding-right: 5px;
        }
    </style>
</head>

<body>

    <div class="wrapper d-flex align-items-stretch">
        <nav id="sidebar">

            <div class="make-me-sticky">

                <div class="custom-menu">
                    <button type="button" id="sidebarCollapse" class="btn btn-primary">
                        <i class="fa fa-bars"></i>
                        <span class="sr-only">Toggle Menu</span>
                    </button>
                </div>
                <h1><a href="index.html" class="logo">HK Labour Market</a></h1>
                <ul class="list-unstyled components mb-5">
                    <li class="active">
                        <a href="index.html"><span class="fa fa-home mr-3"></span> Homepage</a>
                    </li>
                    <li>
                        <a href="#employment-and-vacancies"><span class="fa fa-line-chart mr-3"></span> Employment and
                            vacancies</a>
                    </li>
                    <li>
                        <a href="#employment-earnings"><span class="fa fa-line-chart mr-3"></span> Employment
                            earnings</a>
                    </li>
                    <li>
                        <a href="#hours-of-work"><span class="fa fa-line-chart mr-3"></span> Hours of work</a>
                    </li>
                    <li>
                        <a href="#training-needs"><span class="fa fa-line-chart mr-3"></span> Training needs</a>
                    </li>
                    <li>
                        <a href="#discussion"><span class="fa fa-comments mr-3"></span> Discussion</a>
                    </li>
                </ul>

            </div>

        </nav>


        <!-- Page Content  -->
        <div id="content" class="p-4 p-md-5 pt-5">
            <div id="introduction">

                <h2 class="mb-4">Hong Kong Labour Market Data Visualization</h2>
                <p>Labour market is an important determinant of economic development. In a context of complex and dynamic labour market, gathering intelligence on labour market data, including but not limited to employment and vacancies statistics, labour
                    treatment, and skills needs, can identify and understand issues in the labour market, inform decisions about employment policies, evaluate the benefits and costs of policies, match supply to current demand for skills and help enterprises
                    and workers adapt to change.</p>
                <p>This page discusses various concerns of school graduates entering the labour market, policy makers, and educational institutes. We provide data visualization on Hong Kong labour market data to provide clear pictures of the current labour
                    market situation and answer the following questions:</p>
                <li>What is the best industry and occupation for one to enter as a fresh graduate, based on his/her skills and interests, as well as the market conditions (saturation level and salary)?</li>
                <li>How would one select a program of study in school that can meet the market demand and his/her personal interests?
                </li>
                <li>Which industries and occupations have the brightest future and, therefore, requiring educational institutes to direct more teaching resources and to encourage student enrollments in?</li>
                <li>Which industries and occupations have the highest potentials and can be boosted further with policies to attract companies and talents?</li>
                <li>Which demographic groups (age, education level, sex) are the most disadvantaged and will need government assistance on improving the industry outlook and plans for re-training of the current labor force?</li>
                <li>What types of training programs are most beneficial to the workforce and students?</li>

                <p class="bottom-one"></p>
                <hr>
            </div>


            <div id="employment-and-vacancies">
                <h3 class="mb-4">Employment and vacancies</h3>
                <hr>




                <!-- Treemap -->
                <div id="employment-treemap">
                    <script>
                        d3.csv("https://raw.githubusercontent.com/michaelfong2017/michaelfong2017.github.io/master/hklabourmarket/frontend/csv/employment.csv", function(data) {
                            var nestedData = d3.nest()
                                .key(function(d) {
                                    return d.quarter;
                                })
                                .key(function(d) {
                                    return d.industry_section;
                                })
                                .key(function(d) {
                                    return d.industry_division;
                                })
                                .rollup(function(d) {
                                    var children = [];
                                    d.forEach(function(dSub) {
                                        var keys = Object.keys(dSub);
                                        keys.forEach((key) => {
                                            // number_of_persons_engaged_total,number_of_persons_engaged_male,
                                            // number_of_persons_engaged_female,number_of_vacancies,number_of_establishments
                                            if (key.startsWith("number")) {
                                                children.push(dSub[key]);
                                            }
                                        });
                                    })
                                    return children;
                                })
                                .entries(data);

                            console.log(nestedData)


                            /* Metadata */
                            quarters = [
                                "2000 Q1", "2000 Q2", "2000 Q3", "2000 Q4",
                                "2001 Q1", "2001 Q2", "2001 Q3", "2001 Q4",
                                "2002 Q1", "2002 Q2", "2002 Q3", "2002 Q4",
                                "2003 Q1", "2003 Q2", "2003 Q3", "2003 Q4",
                                "2004 Q1", "2004 Q2", "2004 Q3", "2004 Q4",
                                "2005 Q1", "2005 Q2", "2005 Q3", "2005 Q4",
                                "2006 Q1", "2006 Q2", "2006 Q3", "2006 Q4",
                                "2007 Q1", "2007 Q2", "2007 Q3", "2007 Q4",
                                "2008 Q1", "2008 Q2", "2008 Q3", "2008 Q4",
                                "2009 Q1", "2009 Q2", "2009 Q3", "2009 Q4",
                                "2010 Q1", "2010 Q2", "2010 Q3", "2010 Q4",
                                "2011 Q1", "2011 Q2", "2011 Q3", "2011 Q4",
                                "2012 Q1", "2012 Q2", "2012 Q3", "2012 Q4",
                                "2013 Q1", "2013 Q2", "2013 Q3", "2013 Q4",
                                "2014 Q1", "2014 Q2", "2014 Q3", "2014 Q4",
                                "2015 Q1", "2015 Q2", "2015 Q3", "2015 Q4",
                                "2016 Q1", "2016 Q2", "2016 Q3", "2016 Q4",
                                "2017 Q1", "2017 Q2", "2017 Q3", "2017 Q4",
                                "2018 Q1", "2018 Q2", "2018 Q3", "2018 Q4",
                                "2019 Q1", "2019 Q2", "2019 Q3", "2019 Q4",
                                "2020 Q1", "2020 Q2"
                            ]

                            var keys = []
                            nestedData[0].values.forEach((d) => keys.push(d.key))
                            keys.push("All")
                            console.log(keys)
                            color = d3.scaleOrdinal(d3.schemeCategory20);


                            var treemapLayout = d3.treemap();
                            treemapLayout
                                .tile(d3.treemapSquarify)
                                .size([1000, 600])
                                .paddingOuter(12);


                            /* Slider */
                            var label = d3.select("#employment-treemap")
                                .append("label")
                                .attr("class", "label")


                            var interval = null;
                            var button = label.append("button")
                                .attr("class", "button")
                                .style("width", "5em")
                                .style("margin-right", "0.6em")
                                .style("height", "36px")
                                .style("font-size", "20px")
                                .text("Play")
                                .on("click", function() {
                                    if (interval == null) {
                                        if (slider.value == 81) {
                                            slider.value = 0
                                            d3.select("output").text(quarters[slider.value])
                                            update(slider.value)
                                        }
                                        d3.select(this).text("Pause")
                                        interval = setInterval(function() {
                                            if (slider.value == 81) {
                                                // slider.value = 0
                                                button.text("Play")
                                                clearInterval(interval)
                                                interval = null
                                            } else {
                                                slider.value++;
                                            }

                                            d3.select("output").text(quarters[slider.value])
                                            update(slider.value)
                                        }, textField.value != "" ? textField.value : defaultInterval);
                                    } else if (interval != null) {
                                        d3.select(this).text("Play")
                                        clearInterval(interval)
                                        interval = null
                                    }

                                })

                            label.append("input")
                                .attr("type", "range")
                                .attr("min", 0)
                                .attr("max", 81)
                                .attr("step", "1")
                                .attr("value", 81)
                                .style("width", "800px")
                                .attr("id", "quarter")
                                .attr("class", "slider")
                                .on("input", function input() {
                                    d3.select("output").text(quarters[slider.value])
                                    update(slider.value)
                                });

                            var slider = document.getElementById("quarter");

                            var output = label.append("output")
                                .style("margin-left", "0.4em")
                                .style("white-space", "nowrap")
                                .style("font-size", "24px")
                                .text(quarters[slider.value])

                            var defaultInterval = 100;
                            label.append("input")
                                .attr("type", "text")
                                .attr("value", defaultInterval)
                                .style("width", "55px")
                                .style("margin-left", "1.6em")
                                .attr("id", "intervalTime")
                                .attr("class", "textField")

                            var textField = document.getElementById("intervalTime");

                            label.append("text")
                                .style("margin-left", "0.4em")
                                .style("font-size", "16px")
                                .style("color", "black")
                                .text("ms")




                            var svg = d3.select("#employment-treemap").append("svg")
                                .attr("width", 1500)
                                .attr("height", 650)


                            var chart_group = svg.append("g");
                            chart_group
                                .attr("transform", "translate(0,50)");

                            var tooltip = d3.select("body")
                                .append("div")
                                .style("opacity", 1)
                                .attr("class", "tooltip")
                                .style("width", "300px")
                                .style("background-color", "black")
                                .style("border-radius", "5px")
                                .style("padding", "10px")
                                .style("color", "white")
                                .style("white-space", "pre-wrap")


                            function update(quarter_i) {
                                var root = d3.hierarchy(nestedData[quarter_i], function(d) {
                                        return d.values;
                                    })
                                    .sum(function(d) {
                                        if (d.value != null) {
                                            return d.value[0];
                                        }
                                    })
                                    .sort(function(a, b) {
                                        return a.value - b.value;
                                    });

                                treemapLayout(root);


                                /* For displaying other data */
                                var root_male = d3.hierarchy(nestedData[quarter_i], function(d) {
                                        return d.values;
                                    })
                                    .sum(function(d) {
                                        if (d.value != null) {
                                            return d.value[1];
                                        }
                                    });
                                var root_female = d3.hierarchy(nestedData[quarter_i], function(d) {
                                        return d.values;
                                    })
                                    .sum(function(d) {
                                        if (d.value != null) {
                                            return d.value[2];
                                        }
                                    });
                                var root_vacancies = d3.hierarchy(nestedData[quarter_i], function(d) {
                                        return d.values;
                                    })
                                    .sum(function(d) {
                                        if (d.value != null) {
                                            return d.value[3];
                                        }
                                    });
                                var root_establishments = d3.hierarchy(nestedData[quarter_i], function(d) {
                                        return d.values;
                                    })
                                    .sum(function(d) {
                                        if (d.value != null) {
                                            return d.value[4];
                                        }
                                    });


                                chart_group.selectAll('rect').remove()

                                chart_group.selectAll('rect')
                                    .data(root.descendants(), function(d) {
                                        return d.data.key
                                    })
                                    .enter()
                                    .append('rect')
                                    .attr('x', function(d) {
                                        return d.x0;
                                    })
                                    .attr('y', function(d) {
                                        return d.y0;
                                    })
                                    .attr('width', function(d) {
                                        return d.x1 - d.x0;
                                    })
                                    .attr('height', function(d) {
                                        return d.y1 - d.y0;
                                    })
                                    .style("stroke", "black")
                                    .style("fill", d => {
                                        if (d.depth == 0) {
                                            return color("All")
                                        }
                                        while (d.depth > 1) d = d.parent;
                                        return color(d.data.key);
                                    })
                                    // .on("mouseover", (d) => console.log(d[1].reduce((a, b) => a + b).toFixed(1)));
                                    .on("mouseover", (d) => {
                                        var node = root.descendants().filter(function(des) {
                                            return des.depth == d.depth
                                        }).filter(function(des) {
                                            return des.data.key == d.data.key
                                        });
                                        var node_male = root_male.descendants().filter(function(des) {
                                            return des.depth == d.depth
                                        }).filter(function(des) {
                                            return des.data.key == d.data.key
                                        });
                                        var node_female = root_female.descendants().filter(function(des) {
                                            return des.depth == d.depth
                                        }).filter(function(des) {
                                            return des.data.key == d.data.key
                                        });
                                        var node_vacancies = root_vacancies.descendants().filter(function(des) {
                                            return des.depth == d.depth
                                        }).filter(function(des) {
                                            return des.data.key == d.data.key
                                        });
                                        var node_establishments = root_establishments.descendants().filter(function(des) {
                                            return des.depth == d.depth
                                        }).filter(function(des) {
                                            return des.data.key == d.data.key
                                        });
                                        tooltip.style("visibility", "visible").text(
                                            "Industry section / Industry division: " + (d.data.key.startsWith("20") ? "All" : d.data.key) + "\n" +
                                            "Number of persons engaged (Total): " + node[0].value + "\n" +
                                            "Number of persons engaged (Male): " + node_male[0].value + "\n" +
                                            "Number of persons engaged (Female): " + node_female[0].value + "\n" +
                                            "Number of vacancies: " + node_vacancies[0].value + "\n" +
                                            "Number of establishments: " + node_establishments[0].value
                                        )
                                    })
                                    .on("mousemove", function() {
                                        return tooltip.style("top",
                                            (d3.event.pageY - 10) + "px").style("left", (d3.event.pageX + 10) + "px");
                                    })
                                    .on("mouseout", function() {
                                        return tooltip.style("visibility", "hidden");
                                    });

                            }

                            update(81)



                            /* Legend */
                            var legend = svg.append("g");
                            legend
                                .attr("transform", "translate(960,0)");


                            legend.append("rect")
                                .attr('x', 70)
                                .attr('y', 70)
                                .attr('width', 500)
                                .attr('height', 570)
                                .style("stroke", "black")
                                .style("fill", "black")


                            // Add one dot in the legend for each name.
                            legend.selectAll("mydots")
                                .data(keys)
                                .enter()
                                .append("circle")
                                .attr("cx", 100)
                                .attr("cy", function(d, i) {
                                    return 100 + i * 30
                                }) // 100 is where the first dot appears. 25 is the distance between dots
                                .attr("r", 7)
                                .style("fill", function(d, i) {
                                    return color(keys[i])
                                })

                            // Add one dot in the legend for each name.
                            legend.selectAll("mylabels")
                                .data(keys)
                                .enter()
                                .append("text")
                                .attr("x", 120)
                                .attr("y", function(d, i) {
                                    return 100 + i * 30
                                }) // 100 is where the first dot appears. 25 is the distance between dots
                                .style("fill", function(d, i) {
                                    return color(keys[i])
                                })
                                .text(function(d) {
                                    return d
                                })
                                .attr("text-anchor", "left")
                                .style("alignment-baseline", "middle");


                            /* Title */
                            svg.append("text")
                                .attr("x", 8)
                                .attr("y", 30)
                                .attr("font-size", "22px")
                                .style('fill', '#808080')
                                .text("Total number of persons engaged by Industry section / Industry division")

                        });
                    </script>
                </div>

                <p class="bottom-one"></p>
                <p>The above squarified treemap visualizes the employment composition involving most of the industries. Data are mainly based on the Quarterly Survey of Employment and Vacancies (SEV) and the Quarterly Employment Survey of Construction Sites
                    (Site Survey) conducted by the Census and Statistics Department, Hong Kong Government. Proportion of individual industry section or industry division to all industries is reflected by its relative area. Data in different quarters from
                    2000 Q1 to 2020 Q2 are displayed by moving the slider. Employment and vacancies statistics of individual industry section or industry division is displayed by hovering the mouse over the corresponding rectangle.
                </p>
                <p>When the treemap is interpreted, industries can be ranked by their total number of persons engaged. An unambiguous ranking is shown since the data are already sorted. Key observations are shown below:</p>
                <li>Arts, entertainment and recreation industry grows very sharply, its total number of persons engaged increase from 2379 in 2000 Q1 to 47259 in 2020 Q2. This is a 1890% increase.</li>
                <li>Manufacturing industry diminishes rapidly, its total number of persons engaged drops from 215560 in 2000 Q1 to 84187 in 2020. This is a 60.9% drop.</li>
                <li>Although import/export, wholesale and retail trades industry is the largest industry along the timeline, its proportion to all industries keeps decreasing. Its total number of persons engaged does not significantly grow with Hong Kong
                    population.
                </li>
                <li>Construction industry is the second largest industry from 2000 Q1 to 2002 Q2. Its rank drops to the lowest in 2009 Q3. From 2009 Q4 onwards, its rank and total number of persons engaged increase rapidly. It has become the second largest
                    industry again since 2015 Q4.</li>
                <li>
                    In the treemap, the areas of Professional, scientific and technical services industry, Administrative and support services industry, Education industry and Human health and social work services industry increase greatly. These industries' increase in
                    total number of persons engaged from 2000 Q1 to 2020 Q2 ranges from 76.1% to 113% whereas total number of persons engaged of all surveyed industries only increase by 20.6%. Therefore, it is obvious that these four industries are ranking
                    up and gaining in proportion significantly along the timeline.
                </li>
                <li>
                    Financing and insurance industry, Real estate industry and Information and communications industry are ranking up and gaining in proportion whereas Transportation, storage, postal and courier services industry is ranking down and losing in proportion
                    along the timeline.
                </li>

                <p class="bottom-one"></p>
                <hr>



                <!-- Vacancies and Graduates -->

                <div class='tableauPlaceholder' id='viz1605637294432' style='position: relative'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;ZR&#47;ZRMYKC2X8&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='path' value='shared&#47;ZRMYKC2X8' /> <param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;ZR&#47;ZRMYKC2X8&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en-GB' /></object></div>
                <script type='text/javascript'>
                    var divElement = document.getElementById('viz1605637294432');
                    var vizElement = divElement.getElementsByTagName('object')[0];
                    vizElement.style.width = '100%';
                    vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
                    var scriptElement = document.createElement('script');
                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                    vizElement.parentNode.insertBefore(scriptElement, vizElement);
                </script>


                <p class="bottom-one"></p>
                <p>Seeing vacancies next to graduates in one chart allows one to visualize the supply and demand of the job market. In 2018:</p>
                <li>Top 3 occupations with highest vacancies: service and sales, associate professionals, then elementary occupations.</li>
                <li>Bottom 3 occupations with lowest vacancies: plant and machine operators and assemblers, craft and related workers, and managers and administrators.</li>
                <li>Analysis for potential job application pool can be done by selecting mode of study, level of study, and university and seeing how the graduates numbers change.</li>
                <p class="bottom-one"></p>


                <!-- Employment by Industry and Gender -->
                <div class='tableauPlaceholder' id='viz1605547660893' style='position: relative'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ho&#47;HoursofWork_16055407946520&#47;EmploymentbyIndustryandGender&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'
                        style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='HoursofWork_16055407946520&#47;EmploymentbyIndustryandGender' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ho&#47;HoursofWork_16055407946520&#47;EmploymentbyIndustryandGender&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en' /><param name='filter' value='publish=yes' /></object></div>
                <script type='text/javascript'>
                    var divElement = document.getElementById('viz1605547660893');
                    var vizElement = divElement.getElementsByTagName('object')[0];
                    vizElement.style.width = '100%';
                    vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
                    var scriptElement = document.createElement('script');
                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                    vizElement.parentNode.insertBefore(scriptElement, vizElement);
                </script>


                <p class="bottom-one"></p>
                <p>This barchart can be used to answer how equally distributed are the two genders across industries. Observations:</p>
                <li>Top 3 industries with the highest average percentage of male: public sector civil engineering sites, private sector civil engineering sites, public sector sites.</li>
                <li>Bottom 3 industries with the lowest average percentage of male: residential care services, human health and social work services, social work services.</li>
                <li>Most evenly distributed industries in terms of gender: Services auxiliary to financial and insurance services, manufacture of textiles, sports and other entertainment services.</li>

                <p class="bottom-one"></p>

                <!-- Vacancies by industry -->
                <div class='tableauPlaceholder' id='viz1605637356463' style='position: relative'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;QX&#47;QX6YC7PGN&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='path' value='shared&#47;QX6YC7PGN' /> <param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;QX&#47;QX6YC7PGN&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en-GB' /></object></div>
                <script type='text/javascript'>
                    var divElement = document.getElementById('viz1605637356463');
                    var vizElement = divElement.getElementsByTagName('object')[0];
                    vizElement.style.width = '100%';
                    vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
                    var scriptElement = document.createElement('script');
                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                    vizElement.parentNode.insertBefore(scriptElement, vizElement);
                </script>


                <p class="bottom-one"></p>
                <p>When evaluating industries and occupations, vacancies are important as well as employment. Observations:
                </p>

                <li>
                    In 2019, top 3 industries are: social and professional services, trading, and education.
                </li>
                <li>
                    Top industries do not fluctuate much over the years, from 2013 to 2019.
                </li>


                <p class="bottom-one"></p>
                <hr>
            </div>


            <div id="employment-earnings">
                <h3 class="mb-4">Employment earnings</h3>
                <hr>

                <!-- Wage 1 -->

                <div class='tableauPlaceholder' id='viz1605637455255' style='position: relative'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;2W&#47;2WTMWSQ82&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='path' value='shared&#47;2WTMWSQ82' /> <param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;2W&#47;2WTMWSQ82&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en-GB' /></object></div>
                <script type='text/javascript'>
                    var divElement = document.getElementById('viz1605637455255');
                    var vizElement = divElement.getElementsByTagName('object')[0];
                    if (divElement.offsetWidth > 800) {
                        vizElement.style.minWidth = '420px';
                        vizElement.style.maxWidth = '650px';
                        vizElement.style.width = '100%';
                        vizElement.style.minHeight = '587px';
                        vizElement.style.maxHeight = '887px';
                        vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
                    } else if (divElement.offsetWidth > 500) {
                        vizElement.style.minWidth = '420px';
                        vizElement.style.maxWidth = '650px';
                        vizElement.style.width = '100%';
                        vizElement.style.minHeight = '587px';
                        vizElement.style.maxHeight = '887px';
                        vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
                    } else {
                        vizElement.style.width = '100%';
                        vizElement.style.height = '1027px';
                    }
                    var scriptElement = document.createElement('script');
                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                    vizElement.parentNode.insertBefore(scriptElement, vizElement);
                </script>


                <p class="bottom-one"></p>
                <hr>>


                <!-- Wage 2 -->

                <div class='tableauPlaceholder' id='viz1605599859588' style='position: relative'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ho&#47;HoursofWork&#47;Wage2&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='HoursofWork&#47;Wage2' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ho&#47;HoursofWork&#47;Wage2&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en-GB' /></object></div>
                <script type='text/javascript'>
                    var divElement = document.getElementById('viz1605599859588');
                    var vizElement = divElement.getElementsByTagName('object')[0];
                    if (divElement.offsetWidth > 800) {
                        vizElement.style.minWidth = '420px';
                        vizElement.style.maxWidth = '650px';
                        vizElement.style.width = '100%';
                        vizElement.style.minHeight = '587px';
                        vizElement.style.maxHeight = '887px';
                        vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
                    } else if (divElement.offsetWidth > 500) {
                        vizElement.style.minWidth = '420px';
                        vizElement.style.maxWidth = '650px';
                        vizElement.style.width = '100%';
                        vizElement.style.minHeight = '587px';
                        vizElement.style.maxHeight = '887px';
                        vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
                    } else {
                        vizElement.style.width = '100%';
                        vizElement.style.height = '827px';
                    }
                    var scriptElement = document.createElement('script');
                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                    vizElement.parentNode.insertBefore(scriptElement, vizElement);
                </script>


                <p class="bottom-one"></p>
                <p>5 charts to provide insight into wage by demographics over the years. Observations:</p>
                <li>Top 3 wages by industries: education and public administration, financing and insurance, and electricity and gas supplies.</li>
                <li>Bottom wages by industries: estate management, security and cleaning services, miscellaneous activities and restaurants.</li>
                <li>All industries have growing wages from 2011 to 2019.</li>
                <li>Top wage by occupation: managers and professionals (HK$28,100 in 2019).</li>
                <li>Bottom wage by occupations: elementary occupations (HK$12,900 in 2019).</li>
                <li>Wage by gender reveals that male average wage is consistently higher than female, with over 30% difference in 2019.</li>
                <li>Wage by age group shows that 35-44 group have the highest wage, followed by 25-34, then 45-54 group. This is aligned with the expectation that wages are highest with over 10 years of work experience and decreases after over 20 years of
                    work.
                </li>
                <li>Wage by educational attainment shows tertiary education group has a much higher wage than the next group, secondary 4 to 7 (63.52% higher in 2019). Difference between the rest of the 3 groups are more evenly distributed.</li>
                <p class="bottom-one"></p>

                <hr>
            </div>


            <div id="hours-of-work">
                <h3 class="mb-4">Hours of work</h3>
                <hr>

                <!-- Heat map -->
                <div class='tableauPlaceholder' id='viz1605456706076' style='position: relative'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;82&#47;82TFNCKQ4&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='path' value='shared&#47;82TFNCKQ4' /> <param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;82&#47;82TFNCKQ4&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en-GB' /></object></div>
                <script type='text/javascript'>
                    var divElement = document.getElementById('viz1605456706076');
                    var vizElement = divElement.getElementsByTagName('object')[0];
                    vizElement.style.width = '100%';
                    vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
                    var scriptElement = document.createElement('script');
                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                    vizElement.parentNode.insertBefore(scriptElement, vizElement);
                </script>


                <p class="bottom-one"></p>
                <p>Color-coded data to easily spot trends and changes over the years across different industries. Observations:</p>
                <li>Top number of hours of work industry: accommodation and food services, longest working hours consistently between 2008 and 2019 (48-54 hours per week).</li>
                <li>Lowest number of hours work industry: trade and wholesale have the shortest working hours (40-44 hours).</li>
                <li>Common trend of working hours reducing in recent years across most industries.</li>
                <li>Males have longer working hours in general. However, female’s working hours have less reductions over the years compared to male’s.</li>


                <p class="bottom-one"></p>
                <hr>
            </div>


            <div id="training-needs">
                <h3 class="mb-4">Training needs</h3>
                <hr>

                <script>
                    var data = {
                        "name": "All",
                        "children": [{
                            "name": "經理及行政級人員、專業人員與輔助專業人員 Managers and administrators, professionals and associate professionals",
                            "children": [{
                                "training": "Yes",
                                "children": [{
                                    "type": 0,
                                    "value": 120.3
                                }, {
                                    "type": 1,
                                    "value": 57.1
                                }, {
                                    "type": 2,
                                    "value": 52.2
                                }, {
                                    "type": 3,
                                    "value": 38.3
                                }, {
                                    "type": 4,
                                    "value": 35.5
                                }, {
                                    "type": 5,
                                    "value": 0
                                }, {
                                    "type": 6,
                                    "value": 0
                                }, {
                                    "type": 7,
                                    "value": 0
                                }, {
                                    "type": 8,
                                    "value": 0
                                }]
                            }, {
                                "training": "No",
                                "value": 1239
                            }]
                        }, {
                            "name": "文書支援人員 Clerical support workers",
                            "children": [{
                                "training": "Yes",
                                "children": [{
                                    "type": 0,
                                    "value": 19.6
                                }, {
                                    "type": 1,
                                    "value": 29.2
                                }, {
                                    "type": 2,
                                    "value": 0
                                }, {
                                    "type": 3,
                                    "value": 22.6
                                }, {
                                    "type": 4,
                                    "value": 0
                                }, {
                                    "type": 5,
                                    "value": 21.3
                                }, {
                                    "type": 6,
                                    "value": 19.2
                                }, {
                                    "type": 7,
                                    "value": 0
                                }, {
                                    "type": 8,
                                    "value": 0
                                }]
                            }, {
                                "training": "No",
                                "value": 378.3
                            }]
                        }, {
                            "name": "服務工作及銷售人員 Service and sales workers",
                            "children": [{
                                "training": "Yes",
                                "children": [{
                                    "type": 0,
                                    "value": 36.5
                                }, {
                                    "type": 1,
                                    "value": 16.8
                                }, {
                                    "type": 2,
                                    "value": 0
                                }, {
                                    "type": 3,
                                    "value": 22.9
                                }, {
                                    "type": 4,
                                    "value": 0
                                }, {
                                    "type": 5,
                                    "value": 16.1
                                }, {
                                    "type": 6,
                                    "value": 0
                                }, {
                                    "type": 7,
                                    "value": 15.3
                                }, {
                                    "type": 8,
                                    "value": 0
                                }]
                            }, {
                                "training": "No",
                                "value": 519.4
                            }]
                        }, {
                            "name": "工藝及有關人員、機台及機器操作員及裝配員 Craft and related workers, plant and machine operators and assemblers",
                            "children": [{
                                "training": "Yes",
                                "children": [{
                                    "type": 0,
                                    "value": 22.9
                                }, {
                                    "type": 1,
                                    "value": 0
                                }, {
                                    "type": 2,
                                    "value": 0
                                }, {
                                    "type": 3,
                                    "value": 19.7
                                }, {
                                    "type": 4,
                                    "value": 0
                                }, {
                                    "type": 5,
                                    "value": 15.8
                                }, {
                                    "type": 6,
                                    "value": 14.9
                                }, {
                                    "type": 7,
                                    "value": 0
                                }, {
                                    "type": 8,
                                    "value": 19.1
                                }]
                            }, {
                                "training": "No",
                                "value": 327.5
                            }]
                        }, {
                            "name": "非技術工人 Elementary occupations",
                            "children": [{
                                "training": "Yes",
                                "children": [{
                                    "type": 0,
                                    "value": 13.5
                                }, {
                                    "type": 1,
                                    "value": 0
                                }, {
                                    "type": 2,
                                    "value": 0
                                }, {
                                    "type": 3,
                                    "value": 12.2
                                }, {
                                    "type": 4,
                                    "value": 0
                                }, {
                                    "type": 5,
                                    "value": 10.2
                                }, {
                                    "type": 6,
                                    "value": 8.1
                                }, {
                                    "type": 7,
                                    "value": 0
                                }, {
                                    "type": 8,
                                    "value": 7.5
                                }]
                            }, {
                                "training": "No",
                                "value": 729.4
                            }]
                        }]
                    }

                    // create a list of keys
                    var keys_ch = ["對所售賣產品及提供服務的知識",
                            "員工訓練及輔導",
                            "領導才能及團隊合作",
                            "適應新工作程序或其他轉變的能力",
                            "人力資源管理",
                            "創意及創新",
                            "管理個人時間及編排個人工作",
                            "客戶服務技巧",
                            "其他特定工作技能",
                            "總培訓出席人數",
                            "所有僱員"
                        ]
                        // create a list of keys
                    var keys_en = ["Knowledge of products and services offered",
                        "Staff training and counselling",
                        "Leadership and teamwork",
                        "Ability to adapt to new work procedure or other changes",
                        "Human resource management",
                        "Creativity and innovation",
                        "Time management and work organisation",
                        "Customer service skills",
                        "Other job-specific skills",
                        "Total number of training attendance",
                        "All employees"
                    ]

                    var rootNode = d3.hierarchy(data)
                    var packLayout = d3.pack();
                    packLayout.size([1000, 800]);
                    rootNode.sum(function(d) {
                        return d.value;
                    });
                    packLayout(rootNode);


                    var color = ["#eb5d0f", "#2718e6", "#980c2e", "#d997c6", "#bee544", "#7b64cf", "#c7a585", "#0a8920", "#CBB446"];


                    var svg = d3.select("#training-needs").append("svg")
                        .attr("width", 1200)
                        .attr("height", 1000)
                        .attr("class", "bubble")

                    var chart_group = svg.append("g");
                    chart_group
                        .attr("transform", "translate(-100,70)");


                    var tooltip = d3.select("body")
                        .append("div")
                        .style("opacity", 1)
                        .attr("class", "tooltip")
                        .style("background-color", "black")
                        .style("border-radius", "5px")
                        .style("padding", "10px")
                        .style("color", "white")
                        .style("white-space", "pre-wrap")


                    chart_group.selectAll('circle')
                        .data(rootNode.descendants())
                        .enter()
                        .append('circle')
                        .filter(function(d) {
                            return d.depth >= 1
                        })
                        .attr("fill", (d, i) => d.data.type != null ? color[d.data.type] : d.data.training == "No" ? "grey" : d.data.training == "Yes" ? "lightgreen" : "lightblue")
                        .attr('cx', function(d) {
                            return d.x;
                        })
                        .attr('cy', function(d) {
                            return d.y;
                        })
                        .attr('r', function(d) {
                            return d.r;
                        })
                        // .on("mouseover", (d) => console.log(d[1].reduce((a, b) => a + b).toFixed(1)));
                        .on("mouseover", (d) => tooltip.style("visibility", "visible").text(d.data.type != null ? keys_en[d.data.type] + "\n" + d.value.toFixed(1) + "k" :
                            d.data.training == "Yes" ? "Total number of training attendance" + "\n" + d.value.toFixed(1) + "k" :
                            d.data.training == "No" ? "Number of all employees minus total number of training attendance" + "\n" + d.value.toFixed(1) + "k" :
                            "All employees" + "\n" + d.value.toFixed(1) + "k"))
                        .on("mousemove", function() {
                            return tooltip.style("top",
                                (d3.event.pageY - 10) + "px").style("left", (d3.event.pageX + 10) + "px");
                        })
                        .on("mouseout", function() {
                            return tooltip.style("visibility", "hidden");
                        });



                    var label_group = svg.append("g");
                    label_group
                        .attr("transform", "translate(0,20)");
                    label_group.append("text")
                        .attr("x", 35)
                        .attr("y", 710)
                        .attr("font-size", "12px")
                        .text("經理及行政級人員、專業人員與輔助專業人員")
                    label_group.append("text")
                        .attr("x", 35)
                        .attr("y", 725)
                        .text("Managers and administrators, professionals")
                    label_group.append("text")
                        .attr("x", 35)
                        .attr("y", 740)
                        .text("and associate professionals")


                    label_group.append("text")
                        .attr("x", 660)
                        .attr("y", 590)
                        .attr("font-size", "12px")
                        .text("文書支援人員")
                    label_group.append("text")
                        .attr("x", 660)
                        .attr("y", 605)
                        .text("Clerical support workers")


                    label_group.append("text")
                        .attr("x", 620)
                        .attr("y", 775)
                        .attr("font-size", "12px")
                        .text("服務工作及銷售人員")
                    label_group.append("text")
                        .attr("x", 620)
                        .attr("y", 790)
                        .text("Service and sales workers")


                    label_group.append("text")
                        .attr("x", 445)
                        .attr("y", 155)
                        .attr("font-size", "12px")
                        .text("工藝及有關人員、機台及機器操作員及裝配員")
                    label_group.append("text")
                        .attr("x", 445)
                        .attr("y", 170)
                        .text("Craft and related workers, plant and")
                    label_group.append("text")
                        .attr("x", 445)
                        .attr("y", 185)
                        .text("machine operators and assemblers")


                    label_group.append("text")
                        .attr("x", 10)
                        .attr("y", 130)
                        .attr("font-size", "12px")
                        .text("非技術工人")
                    label_group.append("text")
                        .attr("x", 10)
                        .attr("y", 145)
                        .text("Elementary occupations")


                    /* Title */
                    svg.append("text")
                        .attr("x", 8)
                        .attr("y", 25)
                        .attr("font-size", "22px")
                        .style('fill', '#808080')
                        .text("Top 5 cited training courses arranged by employers attended by employed")
                    svg.append("text")
                        .attr("x", 33)
                        .attr("y", 50)
                        .attr("font-size", "22px")
                        .style('fill', '#808080')
                        .text("persons for each occupation during the 12 months before enumeration")


                    /* Data source */
                    svg.append("text")
                        .attr("x", 0)
                        .attr("y", 950)
                        .attr("font-size", "16px")
                        .style('fill', '#808080')
                        .text("Data source: Census and Statistics Department, Hong Kong Government, 2018")


                    /* Legend */
                    var legend = svg.append("g");
                    legend
                        .attr("transform", "translate(630,-15)");

                    var legend_a = legend.append("g");


                    color.push("lightgreen");
                    color.push("lightblue");


                    // Add one dot in the legend for each name.
                    legend_a.selectAll("mydots")
                        .data(keys_ch)
                        .enter()
                        .append("circle")
                        .attr("cx", 100)
                        .attr("cy", function(d, i) {
                            return 100 + i * 40
                        }) // 100 is where the first dot appears. 25 is the distance between dots
                        .attr("r", 7)
                        .style("fill", function(d, i) {
                            return color[i]
                        })

                    // Add one dot in the legend for each name.
                    legend_a.selectAll("mylabels")
                        .data(keys_ch)
                        .enter()
                        .append("text")
                        .attr("x", 120)
                        .attr("y", function(d, i) {
                            return 100 + i * 40
                        }) // 100 is where the first dot appears. 25 is the distance between dots
                        .style("fill", function(d, i) {
                            return color[i]
                        })
                        .text(function(d) {
                            return d
                        })
                        .attr("text-anchor", "left")
                        .style("alignment-baseline", "middle");


                    var legend_b = legend.append("g");
                    legend_b
                        .attr("transform", "translate(0, 20)");


                    // Add one dot in the legend for each name.
                    legend_b.selectAll("mylabels")
                        .data(keys_en)
                        .enter()
                        .append("text")
                        .attr("x", 120)
                        .attr("y", function(d, i) {
                            return 100 + i * 40
                        }) // 100 is where the first dot appears. 25 is the distance between dots
                        .style("fill", function(d, i) {
                            return color[i]
                        })
                        .text(function(d) {
                            return d
                        })
                        .attr("text-anchor", "left")
                        .style("alignment-baseline", "middle");
                </script>


                <p class="bottom-one"></p>
                <p>The bubbles are in different colours, corresponding to employed persons with different training experiences. There are some key observations:</p>
                <li>Training about knowledge of products and services offered is the most attended training since it is cited in all 5 occupations and it has the largest coverage among all types of trainings.</li>
                <li>The proportion of total number of training attendance to the number of all employed persons of elementary occupations is obviously smaller than that of other occupations. This proportion is only 6.59% while other 4 proportions range from
                    17.2% to 24.3%.</li>
                <li>As total number of training attendance is less than one-fourth of number of all employed persons, most of the employed persons do not have training needs since their employers have not arranged any trainings for them.</li>
                <li>Actual training resources needed for different occupations can be obtained by investigating the sizes of light green bubbles. For example, managers and administrators, professionals and associate professionals have the most training needs.</li>
                <li>Occupation-specific trainings which may not be important in general can be highlighted easily. For instance, dark red bubble, which is leadership and teamwork, is particularly important for managers and administrators, professionals and
                    associate professionals whereas green bubble, which is customer service skills, is particularly important for service and sales workers.</li>


                <p class="bottom-one"></p>
                <hr>
            </div>


            <div id="discussion">
                <h3 class="mb-4">Discussion</h3>

                <p>For the concerns and questions that are raised before, personalized answers can be derived using the visualizations. One would look at the industry of interest based on his/her education, skills and career preferences.</p>
                <p>A healthy and efficient labor market is crucial to the economy of any city. Having insight into issues in the labor market, making the right decisions on employment policies, matching labor supply to market demands and helping enterprises
                    and workers to adapt to technological and societal changes by picking up the right skills are incredibly important to the well-being of citizens living in the city.</p>
                <p>Building visualizations using data from the Census and Statistics Department of Hong Kong Government, the following crucial questions can be answered with certain confidence, based on the support of the data and the insight gained through
                    interpreting the data:</p>
                <li>What industries should a fresh graduate choose to enter?</li>
                <li>What program of study should a new student select?</li>
                <li>Which industries and occupations should educational institutes direct more teaching and recruiting resources to?</li>
                <li>What policies and assistances should governments provide to businesses and workers?</li>
                <li>What demographic groups should government direct resources to support?</li>
                <li>What type of trainings should the promoted by the government and businesses?</li>
                <p></p>

                <p>Visualizations of employment and educational data are powerful tools for providing insight to contribute to the well-being of not only the labor market, but also the society as a whole.</p>

                <p class="bottom-one"></p>
                <hr>
            </div>



        </div>

    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/popper.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/main.js"></script>
</body>

</html>